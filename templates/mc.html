<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Own vs Rent Analyzer (Monte Carlo Version)</title>
  <!-- Link to the same external CSS as index.html -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Own vs Rent? Monte Carlo Simulation!</h1>
  </header>

  <main>
    <div class="container">

      <!-- ============= ANNUAL INCOME ============= -->
      <div class="input-group">
        <label for="annual_income">Annual Income ($):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="annual_income" 
            min="10000" 
            max="20000000" 
            step="10000" 
            value="60000" 
            oninput="syncValueFromSlider('annual_income')"
          >
          <input 
            type="text" 
            id="annual_income_text" 
            value="60000" 
            oninput="syncValueFromText('annual_income')"
            onblur="validateInput('annual_income')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="annual_income_dist_type">Distribution Type:</label>
        <select id="annual_income_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="annual_income_dist_mean" step="1" value="60000">
        </label>
        <label>Std Dev:
          <input type="number" id="annual_income_dist_stdev" step="1" value="10000">
        </label>
        <label>Min:
          <input type="number" id="annual_income_dist_min" step="1" value="10000">
        </label>
        <label>Max:
          <input type="number" id="annual_income_dist_max" step="1" value="20000000">
        </label>
        <label>Mode:
          <input type="number" id="annual_income_dist_mode" step="1" value="60000">
        </label>
      </div>

      <!-- ============= HOME PRICE ============= -->
      <div class="input-group">
        <label for="home_price">Home Price ($):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="home_price" 
            min="100000" 
            max="150000000" 
            step="10000" 
            value="300000" 
            oninput="syncValueFromSlider('home_price')"
          >
          <input 
            type="text" 
            id="home_price_text" 
            value="300000" 
            oninput="syncValueFromText('home_price')"
            onblur="validateInput('home_price')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="home_price_dist_type">Distribution Type:</label>
        <select id="home_price_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="home_price_dist_mean" step="10000" value="300000">
        </label>
        <label>Std Dev:
          <input type="number" id="home_price_dist_stdev" step="10000" value="50000">
        </label>
        <label>Min:
          <input type="number" id="home_price_dist_min" step="10000" value="100000">
        </label>
        <label>Max:
          <input type="number" id="home_price_dist_max" step="10000" value="150000000">
        </label>
        <label>Mode:
          <input type="number" id="home_price_dist_mode" step="10000" value="300000">
        </label>
      </div>

      <!-- ============= DOWN PAYMENT ============= -->
      <div class="input-group">
        <label for="down_payment">Down Payment ($):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="down_payment" 
            min="0" 
            max="500000" 
            step="5000" 
            value="60000" 
            oninput="syncValueFromSlider('down_payment')"
          >
          <input 
            type="text" 
            id="down_payment_text" 
            value="60000" 
            oninput="syncValueFromText('down_payment')"
            onblur="validateInput('down_payment')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="down_payment_dist_type">Distribution Type:</label>
        <select id="down_payment_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="down_payment_dist_mean" step="1000" value="60000">
        </label>
        <label>Std Dev:
          <input type="number" id="down_payment_dist_stdev" step="1000" value="10000">
        </label>
        <label>Min:
          <input type="number" id="down_payment_dist_min" step="1000" value="0">
        </label>
        <label>Max:
          <input type="number" id="down_payment_dist_max" step="1000" value="500000">
        </label>
        <label>Mode:
          <input type="number" id="down_payment_dist_mode" step="1000" value="60000">
        </label>
      </div>

      <!-- ============= MORTGAGE RATE ============= -->
      <div class="input-group">
        <label for="mortgage_rate">Mortgage Rate (%):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="mortgage_rate" 
            min="1" 
            max="10" 
            step="0.1" 
            value="4" 
            oninput="syncValueFromSlider('mortgage_rate')"
          >
          <input 
            type="text" 
            id="mortgage_rate_text" 
            value="4" 
            oninput="syncValueFromText('mortgage_rate')"
            onblur="validateInput('mortgage_rate')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="mortgage_rate_dist_type">Distribution Type:</label>
        <select id="mortgage_rate_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="mortgage_rate_dist_mean" step="0.1" value="4">
        </label>
        <label>Std Dev:
          <input type="number" id="mortgage_rate_dist_stdev" step="0.1" value="1">
        </label>
        <label>Min:
          <input type="number" id="mortgage_rate_dist_min" step="0.1" value="1">
        </label>
        <label>Max:
          <input type="number" id="mortgage_rate_dist_max" step="0.1" value="10">
        </label>
        <label>Mode:
          <input type="number" id="mortgage_rate_dist_mode" step="0.1" value="4">
        </label>
      </div>

      <!-- ============= MORTGAGE TERM ============= -->
      <div class="input-group">
        <label for="mortgage_term">Mortgage Term (years):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="mortgage_term" 
            min="10" 
            max="75" 
            step="5" 
            value="30" 
            oninput="syncValueFromSlider('mortgage_term')"
          >
          <input 
            type="text" 
            id="mortgage_term_text" 
            value="30" 
            oninput="syncValueFromText('mortgage_term')"
            onblur="validateInput('mortgage_term')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="mortgage_term_dist_type">Distribution Type:</label>
        <select id="mortgage_term_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="mortgage_term_dist_mean" step="1" value="30">
        </label>
        <label>Std Dev:
          <input type="number" id="mortgage_term_dist_stdev" step="1" value="10">
        </label>
        <label>Min:
          <input type="number" id="mortgage_term_dist_min" step="1" value="10">
        </label>
        <label>Max:
          <input type="number" id="mortgage_term_dist_max" step="1" value="75">
        </label>
        <label>Mode:
          <input type="number" id="mortgage_term_dist_mode" step="1" value="30">
        </label>
      </div>

      <!-- ============= PROPERTY TAX RATE ============= -->
      <div class="input-group">
        <label for="property_tax_rate">Property Tax Rate (%):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="property_tax_rate" 
            min="0" 
            max="10" 
            step="0.1" 
            value="1.2" 
            oninput="syncValueFromSlider('property_tax_rate')"
          >
          <input 
            type="text" 
            id="property_tax_rate_text" 
            value="1.2" 
            oninput="syncValueFromText('property_tax_rate')"
            onblur="validateInput('property_tax_rate')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="property_tax_rate_dist_type">Distribution Type:</label>
        <select id="property_tax_rate_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="property_tax_rate_dist_mean" step="0.1" value="1.2">
        </label>
        <label>Std Dev:
          <input type="number" id="property_tax_rate_dist_stdev" step="0.1" value="0.3">
        </label>
        <label>Min:
          <input type="number" id="property_tax_rate_dist_min" step="0.1" value="0">
        </label>
        <label>Max:
          <input type="number" id="property_tax_rate_dist_max" step="0.1" value="10">
        </label>
        <label>Mode:
          <input type="number" id="property_tax_rate_dist_mode" step="0.1" value="1.2">
        </label>
      </div>

      <!-- ============= HOMEOWNER INSURANCE ============= -->
      <div class="input-group">
        <label for="homeowner_insurance">Homeowner Insurance ($/year):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="homeowner_insurance" 
            min="500" 
            max="20000" 
            step="1000" 
            value="1200" 
            oninput="syncValueFromSlider('homeowner_insurance')"
          >
          <input 
            type="text" 
            id="homeowner_insurance_text" 
            value="1200" 
            oninput="syncValueFromText('homeowner_insurance')"
            onblur="validateInput('homeowner_insurance')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="homeowner_insurance_dist_type">Distribution Type:</label>
        <select id="homeowner_insurance_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="homeowner_insurance_dist_mean" step="100" value="1200">
        </label>
        <label>Std Dev:
          <input type="number" id="homeowner_insurance_dist_stdev" step="100" value="300">
        </label>
        <label>Min:
          <input type="number" id="homeowner_insurance_dist_min" step="100" value="500">
        </label>
        <label>Max:
          <input type="number" id="homeowner_insurance_dist_max" step="100" value="20000">
        </label>
        <label>Mode:
          <input type="number" id="homeowner_insurance_dist_mode" step="100" value="1200">
        </label>
      </div>

      <!-- ============= MAINTENANCE RATE ============= -->
      <div class="input-group">
        <label for="maintenance_rate">Maintenance Rate (%):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="maintenance_rate" 
            min="0" 
            max="20" 
            step="1" 
            value="1" 
            oninput="syncValueFromSlider('maintenance_rate')"
          >
          <input 
            type="text" 
            id="maintenance_rate_text" 
            value="1" 
            oninput="syncValueFromText('maintenance_rate')"
            onblur="validateInput('maintenance_rate')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="maintenance_rate_dist_type">Distribution Type:</label>
        <select id="maintenance_rate_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="maintenance_rate_dist_mean" step="0.1" value="1">
        </label>
        <label>Std Dev:
          <input type="number" id="maintenance_rate_dist_stdev" step="0.1" value="0.5">
        </label>
        <label>Min:
          <input type="number" id="maintenance_rate_dist_min" step="0.1" value="0">
        </label>
        <label>Max:
          <input type="number" id="maintenance_rate_dist_max" step="0.1" value="20">
        </label>
        <label>Mode:
          <input type="number" id="maintenance_rate_dist_mode" step="0.1" value="1">
        </label>
      </div>

      <!-- ============= RENT ============= -->
      <div class="input-group">
        <label for="rent">Rent ($/month):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="rent" 
            min="100" 
            max="50000" 
            step="100" 
            value="1500" 
            oninput="syncValueFromSlider('rent')"
          >
          <input 
            type="text" 
            id="rent_text" 
            value="1500" 
            oninput="syncValueFromText('rent')"
            onblur="validateInput('rent')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="rent_dist_type">Distribution Type:</label>
        <select id="rent_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="rent_dist_mean" step="100" value="1500">
        </label>
        <label>Std Dev:
          <input type="number" id="rent_dist_stdev" step="100" value="300">
        </label>
        <label>Min:
          <input type="number" id="rent_dist_min" step="100" value="100">
        </label>
        <label>Max:
          <input type="number" id="rent_dist_max" step="100" value="50000">
        </label>
        <label>Mode:
          <input type="number" id="rent_dist_mode" step="100" value="1500">
        </label>
      </div>

      <!-- ============= RENT ESCALATION RATE ============= -->
      <div class="input-group">
        <label for="rent_escalation_rate">Rent Escalation Rate (%):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="rent_escalation_rate" 
            min="0" 
            max="10" 
            step="0.1" 
            value="3" 
            oninput="syncValueFromSlider('rent_escalation_rate')"
          >
          <input 
            type="text" 
            id="rent_escalation_rate_text" 
            value="3" 
            oninput="syncValueFromText('rent_escalation_rate')"
            onblur="validateInput('rent_escalation_rate')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="rent_escalation_rate_dist_type">Distribution Type:</label>
        <select id="rent_escalation_rate_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="rent_escalation_rate_dist_mean" step="0.1" value="3">
        </label>
        <label>Std Dev:
          <input type="number" id="rent_escalation_rate_dist_stdev" step="0.1" value="1">
        </label>
        <label>Min:
          <input type="number" id="rent_escalation_rate_dist_min" step="0.1" value="0">
        </label>
        <label>Max:
          <input type="number" id="rent_escalation_rate_dist_max" step="0.1" value="10">
        </label>
        <label>Mode:
          <input type="number" id="rent_escalation_rate_dist_mode" step="0.1" value="3">
        </label>
      </div>

      <!-- ============= HOME APPRECIATION ============= -->
      <div class="input-group">
        <label for="home_appreciation">Home Appreciation Rate (%):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="home_appreciation" 
            min="0" 
            max="10" 
            step="0.1" 
            value="3" 
            oninput="syncValueFromSlider('home_appreciation')"
          >
          <input 
            type="text" 
            id="home_appreciation_text" 
            value="3" 
            oninput="syncValueFromText('home_appreciation')"
            onblur="validateInput('home_appreciation')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="home_appreciation_dist_type">Distribution Type:</label>
        <select id="home_appreciation_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="home_appreciation_dist_mean" step="0.1" value="3">
        </label>
        <label>Std Dev:
          <input type="number" id="home_appreciation_dist_stdev" step="0.1" value="1">
        </label>
        <label>Min:
          <input type="number" id="home_appreciation_dist_min" step="0.1" value="0">
        </label>
        <label>Max:
          <input type="number" id="home_appreciation_dist_max" step="0.1" value="10">
        </label>
        <label>Mode:
          <input type="number" id="home_appreciation_dist_mode" step="0.1" value="3">
        </label>
      </div>

      <!-- ============= INVESTMENT RETURN ============= -->
      <div class="input-group">
        <label for="investment_return">Investment Return (%):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="investment_return" 
            min="0" 
            max="25" 
            step="1" 
            value="5" 
            oninput="syncValueFromSlider('investment_return')"
          >
          <input 
            type="text" 
            id="investment_return_text" 
            value="5" 
            oninput="syncValueFromText('investment_return')"
            onblur="validateInput('investment_return')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="investment_return_dist_type">Distribution Type:</label>
        <select id="investment_return_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="investment_return_dist_mean" step="0.1" value="5">
        </label>
        <label>Std Dev:
          <input type="number" id="investment_return_dist_stdev" step="0.1" value="2">
        </label>
        <label>Min:
          <input type="number" id="investment_return_dist_min" step="0.1" value="0">
        </label>
        <label>Max:
          <input type="number" id="investment_return_dist_max" step="0.1" value="25">
        </label>
        <label>Mode:
          <input type="number" id="investment_return_dist_mode" step="0.1" value="5">
        </label>
      </div>

      <!-- ============= MARGINAL TAX RATE ============= -->
      <div class="input-group">
        <label for="marginal_tax_rate">Marginal Tax Rate (%):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="marginal_tax_rate" 
            min="0" 
            max="100" 
            step="1" 
            value="25" 
            oninput="syncValueFromSlider('marginal_tax_rate')"
          >
          <input 
            type="text" 
            id="marginal_tax_rate_text" 
            value="25" 
            oninput="syncValueFromText('marginal_tax_rate')"
            onblur="validateInput('marginal_tax_rate')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="marginal_tax_rate_dist_type">Distribution Type:</label>
        <select id="marginal_tax_rate_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="marginal_tax_rate_dist_mean" step="1" value="25">
        </label>
        <label>Std Dev:
          <input type="number" id="marginal_tax_rate_dist_stdev" step="1" value="5">
        </label>
        <label>Min:
          <input type="number" id="marginal_tax_rate_dist_min" step="1" value="0">
        </label>
        <label>Max:
          <input type="number" id="marginal_tax_rate_dist_max" step="1" value="100">
        </label>
        <label>Mode:
          <input type="number" id="marginal_tax_rate_dist_mode" step="1" value="25">
        </label>
      </div>

      <!-- ============= INFLATION RATE ============= -->
      <div class="input-group">
        <label for="inflation_rate">Inflation Rate (%):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="inflation_rate" 
            min="0" 
            max="50" 
            step="1" 
            value="2" 
            oninput="syncValueFromSlider('inflation_rate')"
          >
          <input 
            type="text" 
            id="inflation_rate_text" 
            value="2" 
            oninput="syncValueFromText('inflation_rate')"
            onblur="validateInput('inflation_rate')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="inflation_rate_dist_type">Distribution Type:</label>
        <select id="inflation_rate_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="inflation_rate_dist_mean" step="1" value="2">
        </label>
        <label>Std Dev:
          <input type="number" id="inflation_rate_dist_stdev" step="1" value="1">
        </label>
        <label>Min:
          <input type="number" id="inflation_rate_dist_min" step="1" value="0">
        </label>
        <label>Max:
          <input type="number" id="inflation_rate_dist_max" step="1" value="50">
        </label>
        <label>Mode:
          <input type="number" id="inflation_rate_dist_mode" step="1" value="2">
        </label>
      </div>

      <!-- ============= START AGE ============= -->
      <div class="input-group">
        <label for="start_age">Start Age:</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="start_age" 
            min="18" 
            max="75" 
            step="1" 
            value="30" 
            oninput="syncValueFromSlider('start_age')"
          >
          <input 
            type="text" 
            id="start_age_text" 
            value="30" 
            oninput="syncValueFromText('start_age')"
            onblur="validateInput('start_age')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="start_age_dist_type">Distribution Type:</label>
        <select id="start_age_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="start_age_dist_mean" step="1" value="30">
        </label>
        <label>Std Dev:
          <input type="number" id="start_age_dist_stdev" step="1" value="5">
        </label>
        <label>Min:
          <input type="number" id="start_age_dist_min" step="1" value="18">
        </label>
        <label>Max:
          <input type="number" id="start_age_dist_max" step="1" value="75">
        </label>
        <label>Mode:
          <input type="number" id="start_age_dist_mode" step="1" value="30">
        </label>
      </div>

      <!-- ============= END AGE ============= -->
      <div class="input-group">
        <label for="end_age">End Age:</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="end_age" 
            min="30" 
            max="120" 
            step="1" 
            value="65" 
            oninput="syncValueFromSlider('end_age')"
          >
          <input 
            type="text" 
            id="end_age_text" 
            value="65" 
            oninput="syncValueFromText('end_age')"
            onblur="validateInput('end_age')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="end_age_dist_type">Distribution Type:</label>
        <select id="end_age_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="end_age_dist_mean" step="1" value="65">
        </label>
        <label>Std Dev:
          <input type="number" id="end_age_dist_stdev" step="1" value="5">
        </label>
        <label>Min:
          <input type="number" id="end_age_dist_min" step="1" value="30">
        </label>
        <label>Max:
          <input type="number" id="end_age_dist_max" step="1" value="120">
        </label>
        <label>Mode:
          <input type="number" id="end_age_dist_mode" step="1" value="65">
        </label>
      </div>

      <!-- ============= MONTHLY TRAVEL ============= -->
      <div class="input-group">
        <label for="monthly_travel">Monthly Travel/Car Expenses ($/month):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="monthly_travel" 
            min="0" 
            max="10000" 
            step="100" 
            value="300" 
            oninput="syncValueFromSlider('monthly_travel')"
          >
          <input 
            type="text" 
            id="monthly_travel_text" 
            value="300" 
            oninput="syncValueFromText('monthly_travel')"
            onblur="validateInput('monthly_travel')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="monthly_travel_dist_type">Distribution Type:</label>
        <select id="monthly_travel_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="monthly_travel_dist_mean" step="100" value="300">
        </label>
        <label>Std Dev:
          <input type="number" id="monthly_travel_dist_stdev" step="100" value="100">
        </label>
        <label>Min:
          <input type="number" id="monthly_travel_dist_min" step="100" value="0">
        </label>
        <label>Max:
          <input type="number" id="monthly_travel_dist_max" step="100" value="10000">
        </label>
        <label>Mode:
          <input type="number" id="monthly_travel_dist_mode" step="100" value="300">
        </label>
      </div>

      <!-- ============= MONTHLY GROCERIES ============= -->
      <div class="input-group">
        <label for="monthly_groceries">Monthly Groceries ($/month):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="monthly_groceries" 
            min="0" 
            max="10000" 
            step="100" 
            value="400" 
            oninput="syncValueFromSlider('monthly_groceries')"
          >
          <input 
            type="text" 
            id="monthly_groceries_text" 
            value="400" 
            oninput="syncValueFromText('monthly_groceries')"
            onblur="validateInput('monthly_groceries')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="monthly_groceries_dist_type">Distribution Type:</label>
        <select id="monthly_groceries_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="monthly_groceries_dist_mean" step="100" value="400">
        </label>
        <label>Std Dev:
          <input type="number" id="monthly_groceries_dist_stdev" step="100" value="100">
        </label>
        <label>Min:
          <input type="number" id="monthly_groceries_dist_min" step="100" value="0">
        </label>
        <label>Max:
          <input type="number" id="monthly_groceries_dist_max" step="100" value="10000">
        </label>
        <label>Mode:
          <input type="number" id="monthly_groceries_dist_mode" step="100" value="400">
        </label>
      </div>

      <!-- ============= MONTHLY BILLS ============= -->
      <div class="input-group">
        <label for="monthly_bills">Monthly Bills (utilities, phone, etc.) ($/month):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="monthly_bills" 
            min="0" 
            max="20000" 
            step="50" 
            value="250" 
            oninput="syncValueFromSlider('monthly_bills')"
          >
          <input 
            type="text" 
            id="monthly_bills_text" 
            value="250" 
            oninput="syncValueFromText('monthly_bills')"
            onblur="validateInput('monthly_bills')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="monthly_bills_dist_type">Distribution Type:</label>
        <select id="monthly_bills_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="monthly_bills_dist_mean" step="50" value="250">
        </label>
        <label>Std Dev:
          <input type="number" id="monthly_bills_dist_stdev" step="50" value="50">
        </label>
        <label>Min:
          <input type="number" id="monthly_bills_dist_min" step="50" value="0">
        </label>
        <label>Max:
          <input type="number" id="monthly_bills_dist_max" step="50" value="20000">
        </label>
        <label>Mode:
          <input type="number" id="monthly_bills_dist_mode" step="50" value="250">
        </label>
      </div>

      <!-- ============= MONTHLY HEALTHCARE ============= -->
      <div class="input-group">
        <label for="monthly_healthcare">Monthly Healthcare Costs ($/month):</label>
        <div class="flex-row">
          <input 
            type="range" 
            id="monthly_healthcare" 
            min="0" 
            max="10000" 
            step="100" 
            value="200" 
            oninput="syncValueFromSlider('monthly_healthcare')"
          >
          <input 
            type="text" 
            id="monthly_healthcare_text" 
            value="200" 
            oninput="syncValueFromText('monthly_healthcare')"
            onblur="validateInput('monthly_healthcare')"
          >
        </div>
      </div>
      <div class="distribution-group">
        <label for="monthly_healthcare_dist_type">Distribution Type:</label>
        <select id="monthly_healthcare_dist_type">
          <option value="normal" selected>Normal</option>
          <option value="lognormal">Lognormal</option>
          <option value="triangular">Triangular</option>
        </select>
        <label>Mean:
          <input type="number" id="monthly_healthcare_dist_mean" step="100" value="200">
        </label>
        <label>Std Dev:
          <input type="number" id="monthly_healthcare_dist_stdev" step="100" value="50">
        </label>
        <label>Min:
          <input type="number" id="monthly_healthcare_dist_min" step="100" value="0">
        </label>
        <label>Max:
          <input type="number" id="monthly_healthcare_dist_max" step="100" value="10000">
        </label>
        <label>Mode:
          <input type="number" id="monthly_healthcare_dist_mode" step="100" value="200">
        </label>
      </div>

      <!-- ============= RUN BUTTON ============= -->
      <button onclick="runMonteCarlo()">Run Monte Carlo Simulation</button>
    </div>

    <h2>Results</h2>
    <div id="results">
      <!-- You can reuse or adapt your existing placeholders. -->
      <p id="renter_investment"></p>
      <p id="homeowner_investment"></p>
      <p id="final_house_value"></p>
      <p id="homeowner_net_worth"></p>
      <p id="renter_net_worth"></p>
      <p id="lifetime_income"></p>
      <p id="comparison"></p>
      <p id="difference_msg"></p>
    </div>

    <!-- Optional placeholder canvases for Monte Carlo charts -->
    <canvas id="lineChart"></canvas>
    <canvas id="histChart"></canvas>
    <canvas id="boxPlotChart"></canvas>

  </main>

  <footer>
    <p>
      Licensed under GPL 3.0 • Developed by <strong>Eli Gaultney</strong> •
      <a href="https://github.com/elisspace/own_vs_buy/">GitHub Repo</a>
    </p>
  </footer>

  <script>
    // Same utility functions as in index.html, plus a new runMonteCarlo function
    function syncValueFromSlider(id) {
      const rangeElement = document.getElementById(id);
      const textElement = document.getElementById(id + '_text');
      textElement.value = rangeElement.value;
    }

    function syncValueFromText(id) {
      const rangeElement = document.getElementById(id);
      const textElement = document.getElementById(id + '_text');
      rangeElement.value = textElement.value;
    }

    function validateInput(id) {
      const rangeElement = document.getElementById(id);
      const textElement = document.getElementById(id + '_text');

      let value = parseFloat(textElement.value);
      if (isNaN(value)) {
        alert("Invalid input. Please enter a valid numeric value.");
        textElement.value = rangeElement.value;
        return;
      }

      let min = parseFloat(rangeElement.min);
      let max = parseFloat(rangeElement.max);

      if (value < min) {
        alert("Value is below the minimum of " + min + ".");
        value = min;
      } else if (value > max) {
        alert("Value is above the maximum of " + max + ".");
        value = max;
      }

      textElement.value = value;
      rangeElement.value = value;
    }


function runMonteCarlo() {
      // Gather parameters for the "central values"
      // plus read distribution settings from each .distribution-group

      // Below is just a skeleton. In a real app, you'd gather each variable's
      // base value and distribution details, then send them to your backend
      // route (e.g., /mc) for the Monte Carlo run.
  const params = {
    // =========================
    // Base slider / text inputs
    // =========================
    annual_income: parseFloat(document.getElementById('annual_income').value),
    home_price: parseFloat(document.getElementById('home_price').value),
    down_payment: parseFloat(document.getElementById('down_payment').value),
    mortgage_rate: parseFloat(document.getElementById('mortgage_rate').value),
    mortgage_term: parseFloat(document.getElementById('mortgage_term').value),
    property_tax_rate: parseFloat(document.getElementById('property_tax_rate').value),
    homeowner_insurance: parseFloat(document.getElementById('homeowner_insurance').value),
    maintenance_rate: parseFloat(document.getElementById('maintenance_rate').value),
    rent: parseFloat(document.getElementById('rent').value),
    rent_escalation_rate: parseFloat(document.getElementById('rent_escalation_rate').value),
    home_appreciation: parseFloat(document.getElementById('home_appreciation').value),
    investment_return: parseFloat(document.getElementById('investment_return').value),
    marginal_tax_rate: parseFloat(document.getElementById('marginal_tax_rate').value),
    inflation_rate: parseFloat(document.getElementById('inflation_rate').value),
    start_age: parseFloat(document.getElementById('start_age').value),
    end_age: parseFloat(document.getElementById('end_age').value),
    monthly_travel: parseFloat(document.getElementById('monthly_travel').value),
    monthly_groceries: parseFloat(document.getElementById('monthly_groceries').value),
    monthly_bills: parseFloat(document.getElementById('monthly_bills').value),
    monthly_healthcare: parseFloat(document.getElementById('monthly_healthcare').value),

    // ============================
    // Distribution input sections
    // ============================
    annual_income_dist: {
      dist_type: document.getElementById('annual_income_dist_type').value,
      mean: parseFloat(document.getElementById('annual_income_dist_mean').value),
      stdev: parseFloat(document.getElementById('annual_income_dist_stdev').value),
      min: parseFloat(document.getElementById('annual_income_dist_min').value),
      max: parseFloat(document.getElementById('annual_income_dist_max').value),
      mode: parseFloat(document.getElementById('annual_income_dist_mode').value)
    },
    home_price_dist: {
      dist_type: document.getElementById('home_price_dist_type').value,
      mean: parseFloat(document.getElementById('home_price_dist_mean').value),
      stdev: parseFloat(document.getElementById('home_price_dist_stdev').value),
      min: parseFloat(document.getElementById('home_price_dist_min').value),
      max: parseFloat(document.getElementById('home_price_dist_max').value),
      mode: parseFloat(document.getElementById('home_price_dist_mode').value)
    },
    down_payment_dist: {
      dist_type: document.getElementById('down_payment_dist_type').value,
      mean: parseFloat(document.getElementById('down_payment_dist_mean').value),
      stdev: parseFloat(document.getElementById('down_payment_dist_stdev').value),
      min: parseFloat(document.getElementById('down_payment_dist_min').value),
      max: parseFloat(document.getElementById('down_payment_dist_max').value),
      mode: parseFloat(document.getElementById('down_payment_dist_mode').value)
    },
    mortgage_rate_dist: {
      dist_type: document.getElementById('mortgage_rate_dist_type').value,
      mean: parseFloat(document.getElementById('mortgage_rate_dist_mean').value),
      stdev: parseFloat(document.getElementById('mortgage_rate_dist_stdev').value),
      min: parseFloat(document.getElementById('mortgage_rate_dist_min').value),
      max: parseFloat(document.getElementById('mortgage_rate_dist_max').value),
      mode: parseFloat(document.getElementById('mortgage_rate_dist_mode').value)
    },
    mortgage_term_dist: {
      dist_type: document.getElementById('mortgage_term_dist_type').value,
      mean: parseFloat(document.getElementById('mortgage_term_dist_mean').value),
      stdev: parseFloat(document.getElementById('mortgage_term_dist_stdev').value),
      min: parseFloat(document.getElementById('mortgage_term_dist_min').value),
      max: parseFloat(document.getElementById('mortgage_term_dist_max').value),
      mode: parseFloat(document.getElementById('mortgage_term_dist_mode').value)
    },
    property_tax_rate_dist: {
      dist_type: document.getElementById('property_tax_rate_dist_type').value,
      mean: parseFloat(document.getElementById('property_tax_rate_dist_mean').value),
      stdev: parseFloat(document.getElementById('property_tax_rate_dist_stdev').value),
      min: parseFloat(document.getElementById('property_tax_rate_dist_min').value),
      max: parseFloat(document.getElementById('property_tax_rate_dist_max').value),
      mode: parseFloat(document.getElementById('property_tax_rate_dist_mode').value)
    },
    homeowner_insurance_dist: {
      dist_type: document.getElementById('homeowner_insurance_dist_type').value,
      mean: parseFloat(document.getElementById('homeowner_insurance_dist_mean').value),
      stdev: parseFloat(document.getElementById('homeowner_insurance_dist_stdev').value),
      min: parseFloat(document.getElementById('homeowner_insurance_dist_min').value),
      max: parseFloat(document.getElementById('homeowner_insurance_dist_max').value),
      mode: parseFloat(document.getElementById('homeowner_insurance_dist_mode').value)
    },
    maintenance_rate_dist: {
      dist_type: document.getElementById('maintenance_rate_dist_type').value,
      mean: parseFloat(document.getElementById('maintenance_rate_dist_mean').value),
      stdev: parseFloat(document.getElementById('maintenance_rate_dist_stdev').value),
      min: parseFloat(document.getElementById('maintenance_rate_dist_min').value),
      max: parseFloat(document.getElementById('maintenance_rate_dist_max').value),
      mode: parseFloat(document.getElementById('maintenance_rate_dist_mode').value)
    },
    rent_dist: {
      dist_type: document.getElementById('rent_dist_type').value,
      mean: parseFloat(document.getElementById('rent_dist_mean').value),
      stdev: parseFloat(document.getElementById('rent_dist_stdev').value),
      min: parseFloat(document.getElementById('rent_dist_min').value),
      max: parseFloat(document.getElementById('rent_dist_max').value),
      mode: parseFloat(document.getElementById('rent_dist_mode').value)
    },
    rent_escalation_rate_dist: {
      dist_type: document.getElementById('rent_escalation_rate_dist_type').value,
      mean: parseFloat(document.getElementById('rent_escalation_rate_dist_mean').value),
      stdev: parseFloat(document.getElementById('rent_escalation_rate_dist_stdev').value),
      min: parseFloat(document.getElementById('rent_escalation_rate_dist_min').value),
      max: parseFloat(document.getElementById('rent_escalation_rate_dist_max').value),
      mode: parseFloat(document.getElementById('rent_escalation_rate_dist_mode').value)
    },
    home_appreciation_dist: {
      dist_type: document.getElementById('home_appreciation_dist_type').value,
      mean: parseFloat(document.getElementById('home_appreciation_dist_mean').value),
      stdev: parseFloat(document.getElementById('home_appreciation_dist_stdev').value),
      min: parseFloat(document.getElementById('home_appreciation_dist_min').value),
      max: parseFloat(document.getElementById('home_appreciation_dist_max').value),
      mode: parseFloat(document.getElementById('home_appreciation_dist_mode').value)
    },
    investment_return_dist: {
      dist_type: document.getElementById('investment_return_dist_type').value,
      mean: parseFloat(document.getElementById('investment_return_dist_mean').value),
      stdev: parseFloat(document.getElementById('investment_return_dist_stdev').value),
      min: parseFloat(document.getElementById('investment_return_dist_min').value),
      max: parseFloat(document.getElementById('investment_return_dist_max').value),
      mode: parseFloat(document.getElementById('investment_return_dist_mode').value)
    },
    marginal_tax_rate_dist: {
      dist_type: document.getElementById('marginal_tax_rate_dist_type').value,
      mean: parseFloat(document.getElementById('marginal_tax_rate_dist_mean').value),
      stdev: parseFloat(document.getElementById('marginal_tax_rate_dist_stdev').value),
      min: parseFloat(document.getElementById('marginal_tax_rate_dist_min').value),
      max: parseFloat(document.getElementById('marginal_tax_rate_dist_max').value),
      mode: parseFloat(document.getElementById('marginal_tax_rate_dist_mode').value)
    },
    inflation_rate_dist: {
      dist_type: document.getElementById('inflation_rate_dist_type').value,
      mean: parseFloat(document.getElementById('inflation_rate_dist_mean').value),
      stdev: parseFloat(document.getElementById('inflation_rate_dist_stdev').value),
      min: parseFloat(document.getElementById('inflation_rate_dist_min').value),
      max: parseFloat(document.getElementById('inflation_rate_dist_max').value),
      mode: parseFloat(document.getElementById('inflation_rate_dist_mode').value)
    },
    start_age_dist: {
      dist_type: document.getElementById('start_age_dist_type').value,
      mean: parseFloat(document.getElementById('start_age_dist_mean').value),
      stdev: parseFloat(document.getElementById('start_age_dist_stdev').value),
      min: parseFloat(document.getElementById('start_age_dist_min').value),
      max: parseFloat(document.getElementById('start_age_dist_max').value),
      mode: parseFloat(document.getElementById('start_age_dist_mode').value)
    },
    end_age_dist: {
      dist_type: document.getElementById('end_age_dist_type').value,
      mean: parseFloat(document.getElementById('end_age_dist_mean').value),
      stdev: parseFloat(document.getElementById('end_age_dist_stdev').value),
      min: parseFloat(document.getElementById('end_age_dist_min').value),
      max: parseFloat(document.getElementById('end_age_dist_max').value),
      mode: parseFloat(document.getElementById('end_age_dist_mode').value)
    },
    monthly_travel_dist: {
      dist_type: document.getElementById('monthly_travel_dist_type').value,
      mean: parseFloat(document.getElementById('monthly_travel_dist_mean').value),
      stdev: parseFloat(document.getElementById('monthly_travel_dist_stdev').value),
      min: parseFloat(document.getElementById('monthly_travel_dist_min').value),
      max: parseFloat(document.getElementById('monthly_travel_dist_max').value),
      mode: parseFloat(document.getElementById('monthly_travel_dist_mode').value)
    },
    monthly_groceries_dist: {
      dist_type: document.getElementById('monthly_groceries_dist_type').value,
      mean: parseFloat(document.getElementById('monthly_groceries_dist_mean').value),
      stdev: parseFloat(document.getElementById('monthly_groceries_dist_stdev').value),
      min: parseFloat(document.getElementById('monthly_groceries_dist_min').value),
      max: parseFloat(document.getElementById('monthly_groceries_dist_max').value),
      mode: parseFloat(document.getElementById('monthly_groceries_dist_mode').value)
    },
    monthly_bills_dist: {
      dist_type: document.getElementById('monthly_bills_dist_type').value,
      mean: parseFloat(document.getElementById('monthly_bills_dist_mean').value),
      stdev: parseFloat(document.getElementById('monthly_bills_dist_stdev').value),
      min: parseFloat(document.getElementById('monthly_bills_dist_min').value),
      max: parseFloat(document.getElementById('monthly_bills_dist_max').value),
      mode: parseFloat(document.getElementById('monthly_bills_dist_mode').value)
    },
    monthly_healthcare_dist: {
      dist_type: document.getElementById('monthly_healthcare_dist_type').value,
      mean: parseFloat(document.getElementById('monthly_healthcare_dist_mean').value),
      stdev: parseFloat(document.getElementById('monthly_healthcare_dist_stdev').value),
      min: parseFloat(document.getElementById('monthly_healthcare_dist_min').value),
      max: parseFloat(document.getElementById('monthly_healthcare_dist_max').value),
      mode: parseFloat(document.getElementById('monthly_healthcare_dist_mode').value)
    }
  };

  // Now send `params` to your backend endpoint for the Monte Carlo simulation
}


      fetch('/mc', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(params)
      })
      .then(response => response.json())
      .then(data => {
        // Suppose your endpoint returns final net worth stats
        document.getElementById('renter_investment').innerText =
          "Renter's Final Investment Balance: $" + data.renter_investment.toFixed(2);
        document.getElementById('homeowner_investment').innerText =
          "Homeowner's Final Investment Balance: $" + data.homeowner_investment.toFixed(2);

        // ... More updates to #final_house_value, #homeowner_net_worth, etc.

        // Then draw your charts with the arrays of simulation results
        // (Line chart, histogram, box plot).
      })
      .catch(error => console.error("Error in runMonteCarlo:", error));
    
  </script>
</body>
</html>

